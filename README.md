# Era Entertainment ‚Äî Telegram Mini App Backend

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
cd EraFrontSanBack
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
export BOT_TOKEN="your_telegram_bot_token"
export SITE_URL="http://localhost:8000"  # –∏–ª–∏ Vercel URL
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn main:app --reload --port 8000
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–û—Ç–∫—Ä–æ–π: `http://localhost:8000/quiz?uid=12345`

---

## üåê –î–µ–ø–ª–æ–π –Ω–∞ Vercel

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ Vercel CLI
```bash
npm i -g vercel
```

### 2. –ó–∞–ª–æ–≥–∏–Ω—å—Å—è
```bash
vercel login
```

### 3. –î–µ–ø–ª–æ–π
```bash
cd EraFrontSanBack
vercel --prod
```

### 4. –ù–∞—Å—Ç—Ä–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel Dashboard:
- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `SITE_URL` ‚Äî URL —Ç–≤–æ–µ–≥–æ Vercel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ main.py              # FastAPI + Aiogram —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ recommendation.py    # –ê–ª–≥–æ—Ä–∏—Ç–º TF-IDF —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
‚îú‚îÄ‚îÄ programs.json        # 50 –ø—Ä–æ–≥—Ä–∞–º–º —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π!)
‚îú‚îÄ‚îÄ index.html           # –ö–≤–∏–∑-—Ñ–æ—Ä–º–∞ (5 –≤–æ–ø—Ä–æ—Å–æ–≤)
‚îú‚îÄ‚îÄ vercel.json          # –ö–æ–Ω—Ñ–∏–≥ Vercel
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md
```

---

## üì° API Endpoints

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/quiz` | HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–≤–∏–∑–æ–º |
| POST | `/webhook` | –û—Å–Ω–æ–≤–Ω–æ–π –≤–µ–±—Ö—É–∫ (–æ—Ç –∫–≤–∏–∑–∞) |
| POST | `/tilda-webhook` | –í–µ–±—Ö—É–∫ –¥–ª—è Tilda |
| GET | `/programs` | –í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏) |
| GET | `/health` | Health check |

---

## üì¶ –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø—Ä–æ—Å –Ω–∞ `/webhook`:
```json
{
  "uid": "123456789",
  "mood": "active",
  "budget": "medium",
  "company": "friends",
  "time": "evening",
  "location": "indoor"
}
```

### –û—Ç–≤–µ—Ç (–¥–ª—è Tilda):
```json
{
  "status": "success",
  "programs": [
    {
      "id": 1,
      "name": "–í–µ—á–µ—Ä —Å –ø–∏–∫–±–æ–ª–æ–º",
      "details": "...",
      "video_url": "https://...",
      "photo_url": "https://...",
      "visible": true,
      "score": 0.85
    }
  ]
}
```

---

## ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º

–§–∞–π–ª `programs.json` —Å–æ–¥–µ—Ä–∂–∏—Ç 50 –ø—Ä–æ–≥—Ä–∞–º–º.

**–ö–∞–∂–¥–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–º–µ–µ—Ç:**
- `id` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- `name` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ
- `details` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ
- `video_url` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ
- `photo_url` ‚Äî —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–æ—Ç–æ/–∑–∞–∫–∞–∑
- `visible` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–ª–∏ –Ω–µ—Ç
- `category` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (sport, relax, food –∏ —Ç.–¥.)
- `tags` ‚Äî —Ç–µ–≥–∏ –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–≥–∏:**
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: `–∞–∫—Ç–∏–≤–Ω—ã–π`, `—Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–π`
- –ë—é–¥–∂–µ—Ç: `–Ω–∏–∑–∫–∏–π_–±—é–¥–∂–µ—Ç`, `—Å—Ä–µ–¥–Ω–∏–π_–±—é–¥–∂–µ—Ç`, `–≤—ã—Å–æ–∫–∏–π_–±—é–¥–∂–µ—Ç`
- –ö–æ–º–ø–∞–Ω–∏—è: `–æ–¥–∏–Ω`, `–ø–∞—Ä–∞`, `–∫–æ–º–ø–∞–Ω–∏—è`
- –í—Ä–µ–º—è: `—É—Ç—Ä–æ`, `–¥–µ–Ω—å`, `–≤–µ—á–µ—Ä`, `–Ω–æ—á—å`
- –õ–æ–∫–∞—Ü–∏—è: `–≤_–ø–æ–º–µ—â–µ–Ω–∏–∏`, `–Ω–∞_—É–ª–∏—Ü–µ`
- –ò–Ω—Ç–µ—Ä–µ—Å—ã: `—Å–ø–æ—Ä—Ç`, `—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ`, `–µ–¥–∞`, `–º—É–∑—ã–∫–∞`, `–ø—Ä–∏—Ä–æ–¥–∞`, `—ç–∫—Å—Ç—Ä–∏–º`, `—Ä–æ–º–∞–Ω—Ç–∏–∫–∞`, `–∏–≥—Ä—ã`, `—Å–ø–∞`, `–∫–∏–Ω–æ`, `–∫–≤–µ—Å—Ç`, `–ø—Ä–æ–≥—É–ª–∫–∞`
